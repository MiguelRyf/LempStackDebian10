#!/bin/bash
# Script author: Miguel
# Script ver: 1.0

set -e

# Colours
red=$'\e[1;31m'
grn=$'\e[1;32m'
yel=$'\e[1;33m'
blu=$'\e[1;34m'
mag=$'\e[1;35m'
cyn=$'\e[1;36m'
end=$'\e[0m'

# Function update os
    echo "${grn}Starting update os ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    apt update
    echo ""
    sleep 1

    # Installing UFW Firewall
    echo "${grn}Installing UFW Firewall ...${end}"
    echo ""
     echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    apt install ufw
    echo ""
    sleep 1

    # Allow openSSH UFW
    echo "${grn}Allow openSSH UFW ...${end}"
    echo ""
	sleep 3
     echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    ufw allow OpenSSH
    echo ""
    sleep 1

    # Enabling UFW
    echo "${grn}Enabling UFW ...${end}"
    echo ""
	sleep 3
     echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    yes | ufw enable
    echo "y"
    echo ""
    sleep 1

    # Install and start nginx
    echo "${grn}Installing nginx ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    apt install nginx -y
    ufw allow 'Nginx HTTP'
    systemctl start nginx
    echo ""
    sleep 1

    # Install MariaDB server
    echo "${grn}Installing MariaDB server ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************" 
    sleep 3
    MARIADB_VERSION='10.1'
    debconf-set-selections <<< "maria-db-$MARIADB_VERSION mysql-server/root_password password $1"
    debconf-set-selections <<< "maria-db-$MARIADB_VERSION mysql-server/root_password_again password $1"
    apt-get install -qq mariadb-server
    echo ""
    sleep 1

    echo "${grn}installing PHP 7.3 ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
    sleep 3
    apt install php7.3-fpm php-mysql -y
	apt install php-ldap php-curl php-gd php-intl php-mbstring php-soap php-xml php-xmlrpc php-zip -y
	sed -i 's/upload_max_filesize = 2M/upload_max_filesize = 3000M/' /etc/php/7.3/fpm/php.ini
	sed -i 's/post_max_size = 8M/post_max_size = 3000M/' /etc/php/7.3/fpm/php.ini
	sed -i "s/max_execution_time = 30/max_execution_time = 360/g" /etc/php/7.3/fpm/php.ini
	sed -i "s/memory_limit = 128M/memory_limit = 256M/g" /etc/php/7.3/fpm/php.ini
    echo ""
    sleep 1

	# Installing Memcached
    echo "${grn}Installing Memcached...${end}"
    echo ""
     echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
    apt install memcached -y
    echo ""
    sleep 1
	apt install php-memcached -y
    echo ""
    sleep 1

	# Installing IONCUBE
    echo "${grn}Installing IONCUBE ...${end}"
    echo ""
     echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
    # PHP Modules folder
    MODULES=$(php -i | grep extension_dir | awk '{print $NF}')
 
    # PHP Version
    PHP_VERSION=$(php -r "echo PHP_MAJOR_VERSION.'.'.PHP_MINOR_VERSION;")
 
    # Download ioncube
    wget https://downloads.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.gz
    tar -xvzf ioncube_loaders_lin_x86-64.tar.gz
   	rm -f ioncube_loaders_lin_x86-64.tar.gz
  	# Copy files to modules folder
  	sudo cp "ioncube/ioncube_loader_lin_${PHP_VERSION}.so" $MODULES
    echo "zend_extension=$MODULES/ioncube_loader_lin_${PHP_VERSION}.so" >> /etc/php/7.3/fpm/php.ini
    echo "zend_extension=$MODULES/ioncube_loader_lin_${PHP_VERSION}.so" >> /etc/php/7.3/cli/php.ini
	
	rm -rf ioncube
    systemctl restart php7.3-fpm.service
    systemctl restart nginx

   # Mcrypt
    apt-get install php-dev libmcrypt-dev php-pear -y
    pecl channel-update pecl.php.net
    yes | pecl install channel://pecl.php.net/mcrypt-1.0.2
    echo "extension=$MODULES/mcrypt.so" >> /etc/php/7.3/fpm/php.ini
    echo "extension=$MODULES/mcrypt.so" >> /etc/php/7.3/cli/php.ini
    systemctl restart php7.3-fpm.service
    systemctl restart nginx
    echo ""
    sleep 1

    # Config to make PHP-FPM working with Nginx
    echo "${grn}Configuring to make PHP-FPM working with Nginx ...${end}"
    echo ""
    echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************" 
    sleep 3
    rm -rf /etc/nginx/nginx.conf
    cat > /etc/nginx/nginx.conf << EOF
user www-data;
worker_processes auto;
worker_rlimit_nofile 65536;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 65536;
    multi_accept on;
    use epoll;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Frame-Options "SAMEORIGIN";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    types_hash_max_size 2048;
    client_body_buffer_size 256k;
    client_body_timeout 1m;
    client_header_buffer_size 2k;
    client_header_timeout 1m;
    client_max_body_size 5000m;
    keepalive_timeout 60 60;
    large_client_header_buffers 4 16k;
    reset_timedout_connection on;
    send_timeout 65;
    server_name_in_redirect off;
    server_names_hash_max_size 512;
    server_names_hash_bucket_size 512;
    server_tokens off;

    set_real_ip_from 199.27.128.0/21;
    set_real_ip_from 173.245.48.0/20;
    set_real_ip_from 103.21.244.0/22;
    set_real_ip_from 103.22.200.0/22;
    set_real_ip_from 103.31.4.0/22;
    set_real_ip_from 141.101.64.0/18;
    set_real_ip_from 108.162.192.0/18;
    set_real_ip_from 190.93.240.0/20;
    set_real_ip_from 188.114.96.0/20; 
    set_real_ip_from 197.234.240.0/22;
    set_real_ip_from 198.41.128.0/17;
    set_real_ip_from 162.158.0.0/15;
    set_real_ip_from 104.16.0.0/12;
    set_real_ip_from 172.64.0.0/13;
    real_ip_header CF-Connecting-IP;

    fastcgi_connect_timeout 90;
    fastcgi_send_timeout 90;
    fastcgi_read_timeout 6000;
    fastcgi_buffers 256 16k; 
    fastcgi_buffer_size 128k;
    fastcgi_busy_buffers_size 128k; 
    fastcgi_temp_file_write_size 256k;

    open_file_cache max=10000 inactive=30s;
    open_file_cache_valid 60s;
    open_file_cache_min_uses 3;
    open_file_cache_errors off;

    gzip on;
    gzip_disable "msie6";
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_min_length 256;
    gzip_proxied expired no-cache no-store private auth;
    gzip_types text/plain text/css text/xml text/javascript text/x-component text/mathml application/json application/javascript application/xml application/rss+xml application/atom+xml application/xhtml+xml application/xslt+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/ld+json application/vnd.geo+json application/manifest+json application/font-woff application/font-woff2 image/svg+xml image/bmp image/gif image/jpeg image/png image/tiff image/vnd.wap.wbmp image/webp image/x-jng image/x-icon image/x-ms-bmp font/opentype text/cache-manifest;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    access_log off;

    ssl_session_cache shared:SSL:20m;
    ssl_session_timeout 10m;
    ssl_prefer_server_ciphers on;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_dhparam /etc/ssl/certs/dhparam.pem;

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
EOF
    # Install and start nginx
    echo ""
    echo "${grn}Installing HTOP ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
    sleep 3
    apt-get install htop
    echo ""
    sleep 1

    # Install netstat
    echo ""
    echo "${grn}Installing netstat ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
  	sleep 3
  	apt install net-tools -y
	netstat -ptuln
	echo ""
    sleep 1

    # Install SSL LET'S ENCRYPT (1/2)
	echo ""
    echo "${grn}Installing SSL LET'S ENCRYPT (1/2) ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
  	sleep 3
	apt-get install \
     	python3-acme \
    	python3-certbot \
     	python3-mock \
     	python3-openssl \
     	python3-pkg-resources \
     	python3-pyparsing \
     	python3-zope.interface \
     	-y
    echo ""
    sleep 1 	

	# Install SSL LET'S ENCRYPT (2/2)
	echo ""
    echo "${grn}Installing SSL LET'S ENCRYPT (2/2) ...${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
  	sleep 3
  	apt-get install python3-certbot-nginx -y
  	ufw allow 'Nginx Full'
	ufw delete allow 'Nginx HTTP'
  	echo ""
    sleep 1

	# Install OPENSSL
	echo ""
    echo "${grn}Installing OPENSSL${end}"
    echo ""
    echo "******************************************************************************************"
	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "******************************************************************************************"
  	sleep 3
	cd /etc/ssl/certs/
	openssl dhparam -dsaparam -out dhparam.pem 4096
	cd

    # Change Login Greeting
	echo ""
    echo "${grn}Change Login Greeting ...${end}"
    echo ""
    echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
    cat > .bashrc << EOF
echo "########################### SERVER CONFIGURED BY MIGUEL EMMARA ###########################"
echo " ######################## FULL INSTRUCTIONS GO TO MIGUELEMMARA.ME ####################### "
echo ""
echo " __  __ _                  _   ______"                                    
echo "|  \/  (_)                | | |  ____|                                    "
echo "| \  / |_  __ _ _   _  ___| | | |__   _ __ ___  _ __ ___   __ _ _ __ __ _ "
echo "| |\/| | |/ _  | | | |/ _ \ | |  __| | '_   _ \| '_   _ \ / _  | '__/ _  |"
echo "| |  | | | (_| | |_| |  __/ | | |____| | | | | | | | | | | (_| | | | (_| |"
echo "|_|  |_|_|\__, |\__,_|\___|_| |______|_| |_| |_|_| |_| |_|\__,_|_|  \__,_|"
echo "           __/ |"                                                        
echo "          |___/"
echo ""
echo "********************* OPEN MENU BY TYPING ${grn}./menuv3.sh${end} ******************************"
./menuv3.sh
EOF
	echo ""
    sleep 1

	# Install AB BENCHMARKING TOOL
	echo ""
    echo "${grn}Installing AB BENCHMARKING TOOL ...${end}"
    echo ""
    echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
    apt-get install apache2-utils -y
    echo ""
    sleep 1

# PHP POOL SETTING
php7_dotdeb="https://pastebin.com/raw/yBPyB2Y9"
wget -q $php7_dotdeb -O /etc/php/7.3/fpm/pool.d/$domain.conf
sed -i "s/domain.com/$domain/g" /etc/php/7.3/fpm/pool.d/$domain.conf
echo "" >> /etc/php/7.3/fpm/pool.d/$domain.conf
dos2unix /etc/php/7.3/fpm/pool.d/$domain.conf > /dev/null 2>&1
service php7.3-fpm reload

    # Restart nginx and php-fpm
    echo "Restart Nginx & PHP-FPM ..."
    echo ""
    sleep 1
    systemctl restart nginx
    systemctl restart php7.3-fpm.service

	# Install ZIP AND UNZIP
	echo ""
    echo "${grn}Installing ZIP AND UNZIP ...${end}"
    echo ""
    echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
    apt-get install unzip
	apt-get install zip
    echo ""
    sleep 1

	# Install FFMPEG and IMAGEMAGICK
	echo ""
    echo "${grn}Installing FFMPEG AND IMAGEMAGICK...${end}"
    echo ""
    echo "******************************************************************************************"
    echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
    echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
    echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
    echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
    echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
    echo "******************************************************************************************"
    sleep 3
	apt-get install imagemagick -y
	apt-get install ffmpeg -y
    echo ""
    sleep 1

# Menu Script
cd
wget https://pastebin.com/raw/PkjdFHtu -O ~/menuv1.sh && dos2unix ~/menuv1.sh
chmod +x menuv1.sh
wget https://pastebin.com/raw/kKEhRe1R -O ~/menuv2.sh && dos2unix ~/menuv2.sh
chmod +x menuv2.sh
wget https://pastebin.com/raw/wPyFPHF1 -O ~/menuv3.sh && dos2unix ~/menuv3.sh
chmod +x menuv3.sh

	# Success Prompt
	clear
	echo "LEMP Auto Installer BY Miguel Emmara `date`"
	echo "*******************************************************************************************"
	echo "              *   *    *****    *         ***      ***     *   *    ***** 	"
	echo "              *   *    *        *        *   *    *   *    *   *    *		"
	echo "              *   *    *        *        *        *   *    ** **    *		"
	echo "              *   *    ****     *        *        *   *    * * *    ****	"
	echo "              * * *    *        *        *        *   *    *   *    *		"
	echo "              * * *    *        *        *   *    *   *    *   *    *		"
	echo "               * *     *****    *****     ***      ***     *   *    *****	"
	echo ""

	echo "		                  *****     ***	"
	echo "			      	    *      *   *	"
	echo "			      	    *      *   *	"
	echo "			      	    *      *   *	"
	echo "			      	    *      *   *	"
	echo "			      	    *      *   *	"
	echo "			      	    *       ***	"
    echo ""

	echo " *   *    *****     ***     *   *    *****    *        *****    *****     ***     *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " ** **      *      *        *   *    *        *          *      *        *        *   * "
	echo " * * *      *      * ***    *   *    ****     *          *      ****     *        ***** "
	echo " *   *      *      *   *    *   *    *        *          *      *        *        *   * "
	echo " *   *      *      *   *    *   *    *        *          *      *        *   *    *   * "
	echo " *   *    *****     ***      ***     *****    *****      *      *****     ***     *   * "
  	echo "********************* OPEN MENU BY TYPING ${grn}./menuv3.sh${end} ******************************"
	echo ""

rm -f /root/lemp.sh
exit